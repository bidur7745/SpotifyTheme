{% stylesheet %}
.hero-banner {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 60vh;
  background: var(--hero-bg, #fff);
  color: var(--hero-text, #fff);
  text-align: center;
  overflow: hidden;
}
.hero-banner__media,
.hero-banner__fallback-img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0;
  opacity: 0.6;
  transition: opacity 0.3s;
}
.hero-banner__fallback-img {
  opacity: 1;
  pointer-events: none;
}
.hero-banner__media {
  opacity: 0;
  pointer-events: none;
}
.hero-banner--playing .hero-banner__media {
  opacity: 0.6;
}
.hero-banner--playing .hero-banner__fallback-img {
  opacity: 0;
}
.hero-banner__content {
  position: relative;
  z-index: 1;
  max-width: 700px;
  margin: 0 auto;
  padding: 2rem;
}
.hero-banner__title {
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 1rem;
}
.hero-banner__subtitle {
  font-size: 1.25rem;
  margin-bottom: 2rem;
}
.hero-banner__cta {
  display: inline-block;
  padding: 0.75em 2em;
  font-size: 1rem;
  font-weight: 600;
  background: var(--hero-cta-bg, #1db954);
  color: var(--hero-cta-text, #fff);
  border: none;
  border-radius: 999px;
  text-decoration: none;
  transition: background 0.2s;
}
.hero-banner__cta:hover {
  background: var(--hero-cta-bg-hover, #169c46);
}
@media screen and (max-width: 600px) {
  .hero-banner__title { font-size: 1.5rem; }
  .hero-banner__subtitle { font-size: 1rem; }
}
{% endstylesheet %}

<section class="hero-banner" style="--hero-bg: {{ section.settings.bg_color }}; --hero-text: {{ section.settings.text_color }}; --hero-cta-bg: {{ section.settings.cta_bg }}; --hero-cta-text: {{ section.settings.cta_text }}; --hero-cta-bg-hover: {{ section.settings.cta_bg_hover }};">
  <img class="hero-banner__fallback-img" src="{{ 'image.png' | asset_url }}" alt="AuraWear fallback image" loading="lazy" />
  {% if section.settings.video != blank %}
    <video class="hero-banner__media" preload="metadata" poster="{{ section.settings.image | image_url: width: 1200 }}">
      <source src="{{ section.settings.video }}" type="video/mp4">
    </video>
  {% elsif section.settings.image != blank %}
    <img class="hero-banner__media" src="{{ section.settings.image | image_url: width: 1600 }}" alt="" loading="lazy" />
  {% else %}
    <video class="hero-banner__media" preload="metadata">
      <source src="{{ 'hero.mp4' | asset_url }}" type="video/mp4">
    </video>
  {% endif %}
  <div class="hero-banner__content">
    {% if section.settings.title != blank %}
      <h1 class="hero-banner__title">{{ section.settings.title }}</h1>
    {% endif %}
    {% if section.settings.subtitle != blank %}
      <p class="hero-banner__subtitle">{{ section.settings.subtitle }}</p>
    {% endif %}
    {% if section.settings.cta_label != blank and section.settings.cta_link != blank %}
      <a href="{{ section.settings.cta_link }}" class="hero-banner__cta">{{ section.settings.cta_label }}</a>
    {% endif %}
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const heroBanner = document.querySelector('.hero-banner');
  const video = heroBanner?.querySelector('.hero-banner__media');
  const fallbackImg = heroBanner?.querySelector('.hero-banner__fallback-img');
  if (video && video.tagName === 'VIDEO') {
    video.pause();
    video.currentTime = 0;
    heroBanner.addEventListener('mouseenter', () => {
      heroBanner.classList.add('hero-banner--playing');
      video.play();
    });
    heroBanner.addEventListener('mouseleave', () => {
      heroBanner.classList.remove('hero-banner--playing');
      video.pause();
      video.currentTime = 0;
    });
  }
});
</script>

{% schema %}
{
  "name": "Hero banner",
  "settings": [
    {
      "type": "image_picker",
      "id": "image",
      "label": "Background image"
    },
    {
      "type": "url",
      "id": "video",
      "label": "Background video (mp4 URL)",
      "info": "Overrides image if set."
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Welcome to our store"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Subheading",
      "default": "Discover our latest collection and exclusive offers."
    },
    {
      "type": "text",
      "id": "cta_label",
      "label": "Button label",
      "default": "Shop now"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "Button link"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#181818"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "cta_bg",
      "label": "Button background",
      "default": "#1db954"
    },
    {
      "type": "color",
      "id": "cta_bg_hover",
      "label": "Button background (hover)",
      "default": "#169c46"
    },
    {
      "type": "color",
      "id": "cta_text",
      "label": "Button text color",
      "default": "#ffffff"
    }
  ],
  "presets": [
    {
      "name": "Hero banner"
    }
  ]
}
{% endschema %}
