<!-- Font Awesome CDN for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<header class="header" style="position:sticky;top:0;z-index:100;background:var(--color-background);">
  <div class="header__branding">
    <a href="{{ routes.root_url }}" class="header__logo-link" aria-label="the ruse homepage">
      <img src="{{ 'logo.gif' | asset_url }}" alt="the ruse logo" class="header__logo" />
    </a>
    <span class="header__brand-name">the ruse</span>
  </div>

  <nav class="header__nav" aria-label="Main navigation">
    <a href="/" class="header__nav-link">Home</a>
    <div class="header__nav-item header__nav-item--dropdown">
      <a href="/collections/all" class="header__nav-link" aria-haspopup="true" aria-expanded="false">Shop</a>
      <div class="header__dropdown" role="menu">
        <a href="/collections/all" class="header__dropdown-link" role="menuitem">All Products</a>
        <a href="/collections/men" class="header__dropdown-link" role="menuitem">Men</a>
        <a href="/collections/women" class="header__dropdown-link" role="menuitem">Women</a>
        <a href="/collections/accessories" class="header__dropdown-link" role="menuitem">Accessories</a>
        <a href="/collections/sale" class="header__dropdown-link" role="menuitem">Sale</a>
      </div>
    </div>
    <div class="header__nav-item header__nav-item--dropdown">
      <a href="/collections/new-arrivals" class="header__nav-link" aria-haspopup="true" aria-expanded="false">New Arrivals</a>
      <div class="header__dropdown" role="menu">
        <a href="/collections/new-arrivals-this-week" class="header__dropdown-link" role="menuitem">This Week</a>
        <a href="/collections/new-arrivals-trending" class="header__dropdown-link" role="menuitem">Trending Now</a>
        <div class="header__dropdown-item header__dropdown-item--submenu">
          <a href="/collections/new-arrivals-back-in-stock" class="header__dropdown-link" aria-haspopup="true" aria-expanded="false">Back in Stock</a>
          <div class="header__dropdown header__dropdown--submenu" role="menu">
            <a href="/collections/new-arrivals-limited-edition" class="header__dropdown-link" role="menuitem">Limited Edition</a>
          </div>
        </div>
      </div>
    </div>
    <a href="/pages/about" class="header__nav-link">About</a>
    <a href="/pages/contact" class="header__nav-link">Contact</a>
  </nav>

  <div class="header__actions">
    <button class="header__icon-btn header__search-btn" aria-label="Search" tabindex="0" type="button">
      <i class="fa-solid fa-magnifying-glass"></i>
    </button>
    <form class="header__search-form" action="{{ routes.search_url }}" method="get" role="search">
      <input type="search" name="q" placeholder="Search..." class="header__search-input" />
      <button type="submit" class="header__search-submit" aria-label="Submit search">
        <i class="fa-solid fa-magnifying-glass"></i>
      </button>
    </form>
    {% if shop.customer_accounts_enabled %}
      <a href="{{ routes.account_login_url }}" class="header__icon-btn header__login-btn" aria-label="Login">
        Login
      </a>
    {% endif %}
    <a href="{{ routes.cart_url }}" class="header__icon-btn header__cart-btn" aria-label="Cart">
      {% if cart.item_count > 0 %}
        <span class="header__cart-count">{{ cart.item_count }}</span>
      {% endif %}
      {{ 'icon-cart.svg' | inline_asset_content }}
    </a>
    <button class="header__icon-btn header__hamburger-btn" aria-label="Open menu" tabindex="0" type="button">
      <i class="fa-solid fa-bars"></i>
    </button>
  </div>
</header>

<link rel="stylesheet" href="{{ 'header.css' | asset_url }}">

<script>
// Hamburger menu toggle for mobile
const hamburgerBtn = document.querySelector('.header__hamburger-btn');
const nav = document.querySelector('.header__nav');
if (hamburgerBtn && nav) {
  hamburgerBtn.addEventListener('click', () => {
    nav.classList.toggle('header__nav--open');
  });
}
// Search field toggle and close on outside click
const searchBtn = document.querySelector('.header__search-btn');
const searchForm = document.querySelector('.header__search-form');
function closeSearch() {
  searchForm.classList.remove('active');
  searchBtn.classList.remove('hide-search');
}
if (searchBtn && searchForm) {
  searchBtn.addEventListener('click', () => {
    searchForm.classList.toggle('active');
    searchBtn.classList.toggle('hide-search');
    if (searchForm.classList.contains('active')) {
      searchForm.querySelector('input')?.focus();
    }
  });
  document.addEventListener('mousedown', (e) => {
    if (
      searchForm.classList.contains('active') &&
      !searchForm.contains(e.target) &&
      !searchBtn.contains(e.target)
    ) {
      closeSearch();
    }
  });
}
</script>

{% schema %}
{
  "name": "Header (the ruse)",
  "settings": []
}
{% endschema %}
